#!/usr/bin/env perl

my %map;
while($_ = <DATA>) {
    @_ = split;
    $map{$_[1]} = $_[0];
}

my $fmt = "%-10s %-12s %-15s\n";
printf "%-10s %-12s %-15s\n", "DISK", "LABEL", "IDENT";
my @disks = @ARGV;
@disks = map(/(a?da\d+)\b/,glob("/dev/ada* /dev/da*")) unless(@disks);;
foreach my $disk (@disks) {
    $disk =~ s:.*/::;
    chomp($ident = `diskinfo -s /dev/$disk`);
    $label = $map{$ident} or "n/a";
    printf $fmt, $disk, $label, $ident;
}

0;
__END__
sapphire WD-WCC4J1012856
topaz W1H39PNJ
ulexite 43F0194AS
bloodstone WD-WMC1P0313583
aquamarine WD-WCC1P1289078
yag PN2338P4H9UT7C
quartz WD-WCAW34131678
danburite PN2334PBKP5RNT
gypsum P4GSMPUC
feldspar VKHRHWGX
enstatite VLGZAVSY
original VOLUME-3856
birch VOLUME-13439
cedar VOLUME-13438
dogwood VOLUME-13441
aspen VOLUME-13440
elm VOLUME-29575
